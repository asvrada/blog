{"componentChunkName":"component---src-templates-blog-post-js","path":"/work-with-git-2/","result":{"data":{"site":{"siteMetadata":{"title":"Mindscape"}},"markdownRemark":{"id":"d0c6254a-e803-5c66-8137-b2cc0ed35264","excerpt":"上一章: 工作中使用git的一点心得 - 1 一年多过去了，再次总结一下工作中常见的 git 使用场景及指令。 将 commit 移到其他 branch 如何将某 branch 的 commit A 移到一个新的 branch？ 大致思路是在当前commit创建branch，然后将master移回origin…","html":"<blockquote>\n<p>上一章: <a href=\"/blog/work-with-git/\">工作中使用git的一点心得 - 1</a></p>\n</blockquote>\n<p>一年多过去了，再次总结一下工作中常见的 git 使用场景及指令。</p>\n<h2>将 commit 移到其他 branch</h2>\n<p>如何将某 branch 的 commit A 移到一个新的 branch？</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">xxxx -&gt; commit A         master\n\n变为\n\nxxxx                     master\n  ⤷ commit A             feature_branch</code></pre></div>\n<p>大致思路是在当前commit创建branch，然后将master移回origin/master</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> checkout -b <span class=\"token punctuation\">{</span>branch name<span class=\"token punctuation\">}</span>\n<span class=\"token function\">git</span> checkout master\n<span class=\"token function\">git</span> reset --hard <span class=\"token punctuation\">{</span>commit you want HEAD to be<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>git reset</h3>\n<p><code class=\"language-text\">git reset</code> 有三种常见模式 <code class=\"language-text\">--soft --hard --mixed</code>，下表列出各个模式的具体效果（<code class=\"language-text\">git reset -h</code> 可显示下表）</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">--mixed               reset HEAD and index\n--soft                reset only HEAD\n--hard                reset HEAD, index and working tree</code></pre></div>\n<p>其中 index 是用于存放将会被commit的改动。working tree 指当前所在 branch（？不确定）。</p>\n<p>下表列出各个模式对文件/改动的影响</p>\n<table>\n<thead>\n<tr>\n<th>Mode</th>\n<th>Description</th>\n<th>Use case</th>\n<th>How this mode affects changes…</th>\n<th>Already committed</th>\n<th>To be committed</th>\n<th>Not staged for commit</th>\n<th>Untracked files</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>—mixed (default)</td>\n<td>reset HEAD and index</td>\n<td>I want to un-commit and un-add changes</td>\n<td></td>\n<td>Now not staged for commit</td>\n<td>Now not staged for commit</td>\n<td>Unaffected</td>\n<td>Unaffected</td>\n</tr>\n<tr>\n<td>—soft</td>\n<td>reset only HEAD</td>\n<td>I want to un-commit</td>\n<td></td>\n<td>Now to be committed</td>\n<td>Now to be committed</td>\n<td>Unaffected</td>\n<td>Unaffected</td>\n</tr>\n<tr>\n<td>—hard</td>\n<td>reset HEAD, index and working tree</td>\n<td>I want to delete my commits and all work in progress</td>\n<td></td>\n<td>Gone</td>\n<td>Gone</td>\n<td>Gone</td>\n<td>Unaffected</td>\n</tr>\n</tbody>\n</table>\n<h3>git stash</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git stash          Create a stack and store all changes not committed\ngit stash apply    Pop and apple the change from most recent stack\ngit stash drop     Discard the most recent stack</code></pre></div>\n<h2>squash before merge</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/b749b8cc99a0bdf8247ac2526a91a519/4b190/git_merge_squash.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.94594594594595%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeQZKg//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAACAgMAAAAAAAAAAAAAAAABEAARITFB/9oACAEBAAE/IeTFI6D/AP/aAAwDAQACAAMAAAAQsM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAACAgMBAAAAAAAAAAAAAAABIQAREEFxof/aAAgBAQABPxCrGyeBxGBe5yeYZ//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"git merge squash\"\n        title=\"git merge squash\"\n        src=\"/blog/static/b749b8cc99a0bdf8247ac2526a91a519/1c72d/git_merge_squash.jpg\"\n        srcset=\"/blog/static/b749b8cc99a0bdf8247ac2526a91a519/a80bd/git_merge_squash.jpg 148w,\n/blog/static/b749b8cc99a0bdf8247ac2526a91a519/1c91a/git_merge_squash.jpg 295w,\n/blog/static/b749b8cc99a0bdf8247ac2526a91a519/1c72d/git_merge_squash.jpg 590w,\n/blog/static/b749b8cc99a0bdf8247ac2526a91a519/4b190/git_merge_squash.jpg 800w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p><a href=\"https://stackoverflow.com/questions/5308816/how-to-use-git-merge-squash\">https://stackoverflow.com/questions/5308816/how-to-use-git-merge-squash</a></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout main\ngit merge --squash feature_branch\ngit commit</code></pre></div>","frontmatter":{"title":"工作中使用git的一点心得 - 2","date":"August 14, 2020","category":"note"}}},"pageContext":{"slug":"/work-with-git-2/"}}}